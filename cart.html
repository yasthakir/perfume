<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cart Page</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f7f7f7;}
  
  /* Header like index page */
  header { display:flex; align-items:center; justify-content:space-between; background:#fff; padding:10px 15px; box-shadow:0 2px 5px rgba(0,0,0,0.1);}
  header .left, header .right { display:flex; align-items:center; gap:15px; }
  header button, header i { background:none; border:none; cursor:pointer; font-size:20px; color:#333; }
  header h2 { margin:0; font-size:18px; font-weight:600;}
  
  /* Filter */
  .filter { display:flex; justify-content:flex-end; margin:15px; }
  .filter select { padding:5px 10px; border-radius:5px; border:1px solid #ccc; }

  /* Cart container like index page cards */
  .cart-container { display:grid; grid-template-columns: repeat(auto-fill,minmax(180px,1fr)); gap:15px; padding:10px 15px; }
  
  .cart-item { background:#fff; border-radius:10px; padding:10px; box-shadow:0 2px 8px rgba(0,0,0,0.05); cursor:pointer; transition: transform 0.3s; }
  .cart-item:hover { transform: scale(1.03); }

  .cart-item img { width:100%; height:180px; object-fit:cover; border-radius:10px; transition: transform 0.3s; }
  .cart-item img:hover { transform: scale(1.1) rotate(3deg); }

  .cart-details { margin-top:8px; }
  .cart-details h4 { margin:0; font-size:16px; font-weight:600; }
  .cart-details p { margin:2px 0; color:#555; font-size:14px; }

  .cart-actions { display:flex; justify-content:space-between; align-items:center; margin-top:5px; }
  .cart-actions input { width:50px; padding:5px; text-align:center; border-radius:5px; border:1px solid #ccc; }
  .cart-actions button { background:red; color:#fff; border:none; padding:5px 10px; border-radius:5px; cursor:pointer; font-size:12px; }

  .total { text-align:right; padding:15px; font-size:18px; font-weight:bold; }

  .continue-shopping { display:block; margin:20px auto; padding:10px 20px; background:#007bff; color:#fff; text-align:center; border-radius:5px; text-decoration:none; font-weight:600; transition: background 0.3s;}
  .continue-shopping:hover { background:#0056b3; }

  .empty-cart { text-align:center; margin-top:50px; color:#777; font-size:18px; grid-column:1/-1; }
</style>
</head>
<body>

<header>
  <div class="left">
    <button onclick="history.back()"><i class="fas fa-arrow-left"></i></button>
    <h2>My Cart</h2>
  </div>
  <div class="right">
    <button><i class="fas fa-heart"></i></button>
    <button><i class="fas fa-user"></i></button>
    <button><i class="fas fa-bars"></i></button>
  </div>
</header>

<div class="filter">
  Filter: 
  <select id="categoryFilter">
    <option value="all">All</option>
    <option value="him">For Him</option>
    <option value="her">For Her</option>
    <option value="gifts">Gifts</option>
    <option value="signature">Signature</option>
  </select>
</div>


<div class="cart-container" id="cartContainer"></div>
<div class="total">Total: $<span id="totalPrice">0.00</span></div>
<a href="index.html" class="continue-shopping">Continue Shopping</a>

<script>
let cart = JSON.parse(localStorage.getItem("cart") || "[]");
const cartContainer = document.getElementById("cartContainer");
const totalPriceEl = document.getElementById("totalPrice");
const categoryFilter = document.getElementById("categoryFilter");

function renderCart(filter="all") {
  cartContainer.innerHTML = "";
  let total = 0;
  
  const filteredCart = cart.filter(item => filter==="all" ? true : item.category===filter);
  if(filteredCart.length === 0){
    cartContainer.innerHTML = '<div class="empty-cart">Your cart is empty üò¢</div>';
    totalPriceEl.textContent = "0.00";
    return;
  }

  filteredCart.forEach((item,index)=>{
    const div = document.createElement("div");
    div.className = "cart-item";
    div.innerHTML = `
      <img src="${item.img}" alt="${item.name}">
      <div class="cart-details">
        <h4>${item.name}</h4>
        <p>Price: $${item.price}</p>
        <p>Rating: ${item.rating || "‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚òÜ"} | Reviews: ${item.reviews || 0}</p>
      </div>
      <div class="cart-actions">
        <input type="number" min="1" value="${item.qty||1}" data-index="${index}">
        <button data-index="${index}">Remove</button>
      </div>
    `;
    cartContainer.appendChild(div);
    
    total += item.price*(item.qty||1);

    // Clickable product to open product view page
    div.querySelector("img, .cart-details").addEventListener("click", ()=>{
      localStorage.setItem("selectedProduct", JSON.stringify(item));
      window.location.href = "product-view.html";
    });
  });

  totalPriceEl.textContent = total.toFixed(2);

  // Quantity change
  document.querySelectorAll('.cart-actions input').forEach(input=>{
    input.addEventListener('change',e=>{
      const idx = e.target.dataset.index;
      cart[idx].qty = parseInt(e.target.value)||1;
      localStorage.setItem("cart",JSON.stringify(cart));
      renderCart(categoryFilter.value);
    });
  });

  // Remove button
  document.querySelectorAll('.cart-actions button').forEach(btn=>{
    btn.addEventListener('click',e=>{
      const idx = e.target.dataset.index;
      cart.splice(idx,1);
      localStorage.setItem("cart",JSON.stringify(cart));
      renderCart(categoryFilter.value);
    });
  });
}

categoryFilter.addEventListener('change',()=> renderCart(categoryFilter.value));

renderCart();
</script>

</body>
</html>
