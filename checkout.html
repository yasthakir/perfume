<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout - Aurora Perfumes</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
:root {
  --primary:#caa97a;
  --secondary:#e6d2b2;
  --accent-glow: rgba(202,169,122,0.35);
  --bg:#fdfbf7;
  --muted:#7b6f6a;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Poppins',sans-serif;background:var(--bg);color:#222;}
.container{max-width:900px;margin:40px auto;padding:0 20px;}
.hero{
  position:relative;text-align:center;padding:60px 20px;background:linear-gradient(135deg,var(--primary),var(--secondary));color:white;border-radius:20px;overflow:hidden;margin-bottom:30px;
}
.hero h1{font-size:clamp(2rem,5vw,3rem);}
.sparkles{position:absolute;inset:0;pointer-events:none;}
.sparkle{position:absolute;width:6px;height:6px;border-radius:50%;background:white;opacity:.7;animation:floatSparkle 6s infinite ease-in-out alternate;}
.sparkle:nth-child(1){top:20%;left:15%;animation-delay:0s;}
.sparkle:nth-child(2){top:40%;left:70%;animation-delay:2s;}
.sparkle:nth-child(3){top:65%;left:30%;animation-delay:4s;}
.sparkle:nth-child(4){top:80%;left:80%;animation-delay:1s;}
@keyframes floatSparkle{0%{transform:translateY(0) scale(1);opacity:.7;}50%{transform:translateY(-20px) scale(1.2);opacity:1;}100%{transform:translateY(0) scale(1);opacity:.6;}}

.back-btn{
  display:inline-block;margin-bottom:20px;padding:10px 14px;background:linear-gradient(135deg,var(--primary),var(--secondary));color:white;font-weight:bold;border-radius:50px;cursor:pointer;text-decoration:none;transition:transform 0.3s, box-shadow 0.3s;
}
.back-btn:hover{transform:scale(1.05);box-shadow:0 8px 20px var(--accent-glow);}

.cart-item{
  display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding:12px;border-radius:14px;background:white;box-shadow:0 8px 20px rgba(0,0,0,0.08);transition: transform 0.3s, box-shadow 0.3s;
}
.cart-item:hover{transform:translateY(-5px);box-shadow:0 12px 25px rgba(0,0,0,0.12);}
.cart-item img{width:80px;height:80px;object-fit:cover;border-radius:12px;}
.cart-item-details{flex:1;margin-left:15px;}
.cart-item-details h4{margin:0 0 5px 0;}
.cart-item-details p{margin:0;color:var(--muted);}
.cart-actions{display:flex;align-items:center;gap:10px;}
.remove-btn{background:#ff4d4d;border:none;color:white;padding:6px 10px;border-radius:12px;cursor:pointer;font-size:14px;transition: transform 0.3s;}
.remove-btn:hover{transform:scale(1.05);}
.qty-input{width:50px;padding:6px;border-radius:6px;border:1px solid #ccc;text-align:center;font-weight:600;}
.total{text-align:right;font-weight:700;margin-top:20px;font-size:18px;color:#333;}

form{margin-top:30px;display:flex;flex-direction:column;gap:12px;}
input, textarea{
  padding:12px;border-radius:10px;border:1px solid #ccc;width:100%;font-size:14px;
}
button{
  padding:14px;border:none;border-radius:12px;background: linear-gradient(135deg,var(--primary),var(--secondary));
  color:white;font-weight:600;cursor:pointer;transition:transform 0.3s, box-shadow 0.3s;font-size:16px;margin-top:10px;
}
button:hover{transform:scale(1.05);box-shadow:0 10px 25px var(--accent-glow);}
</style>
</head>
<body>
<div class="container">
  <a href="cart.html" class="back-btn">← Back to Cart</a>

  <section class="hero">
    <h1>Checkout</h1>
    <p>Review your cart and complete your order.</p>
    <div class="sparkles">
      <div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div>
    </div>
  </section>

  <div id="cartItems"></div>
  <div class="total" id="cartTotal">Total: ₹0</div>

  <form id="checkoutForm">
    <input type="text" id="name" placeholder="Full Name" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="tel" id="phone" placeholder="Phone Number" required>
    <textarea id="address" placeholder="Shipping Address" rows="3" required></textarea>
    <button type="submit">Proceed to Pay</button>
  </form>
</div>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
let cart = JSON.parse(localStorage.getItem("cart")) || [];
const cartItemsDiv = document.getElementById("cartItems");
const cartTotalDiv = document.getElementById("cartTotal");

function calculateTotal(){
  let total=0;
  cart.forEach(item=>{
    total+=item.qty*Number(item.price.replace("$","").replace("₹",""));
  });
  return total;
}

function updateCartDisplay(){
  cartItemsDiv.innerHTML="";
  if(cart.length===0){
    cartItemsDiv.innerHTML="<p>Your cart is empty.</p>";
  }else{
    cart.forEach((item,index)=>{
      const itemDiv=document.createElement("div");
      itemDiv.classList.add("cart-item");
      itemDiv.innerHTML=`
        <img src="${item.image}" alt="${item.name}">
        <div class="cart-item-details">
          <h4>${item.name}</h4>
          <p>Price: ${item.price}</p>
        </div>
        <div class="cart-actions">
          <input type="number" class="qty-input" value="${item.qty}" min="1">
          <button class="remove-btn">Remove</button>
        </div>
      `;
      // Quantity change
      itemDiv.querySelector(".qty-input").addEventListener("input", (e)=>{
        let val = parseInt(e.target.value);
        if(val<1) val=1;
        cart[index].qty=val;
        localStorage.setItem("cart",JSON.stringify(cart));
        cartTotalDiv.textContent="Total: ₹"+calculateTotal();
      });
      // Remove button
      itemDiv.querySelector(".remove-btn").addEventListener("click", ()=>{
        cart.splice(index,1);
        localStorage.setItem("cart",JSON.stringify(cart));
        updateCartDisplay();
      });
      cartItemsDiv.appendChild(itemDiv);
    });
  }
  cartTotalDiv.textContent="Total: ₹"+calculateTotal();
}
if(cart.length>0 && !cart[0].qty) cart.forEach(item=>item.qty=1);
updateCartDisplay();

// Razorpay Checkout
document.getElementById("checkoutForm").addEventListener("submit", function(e){
  e.preventDefault();
  if(cart.length===0){ alert("Your cart is empty."); return; }

  const name=document.getElementById("name").value;
  const email=document.getElementById("email").value;
  const phone=document.getElementById("phone").value;
  const address=document.getElementById("address").value;

  const options = {
    "key": "YOUR_RAZORPAY_KEY",
    "amount": calculateTotal()*100,
    "currency": "INR",
    "name": "Aurora Perfumes",
    "description": "Order Payment",
    "prefill": { "name": name, "email": email, "contact": phone },
    "handler": function (response){
      alert("Payment Successful! Payment ID: "+response.razorpay_payment_id);
      localStorage.removeItem("cart");
      window.location.href="index.html";
    },
    "theme": {"color":"#caa97a"}
  };
  const rzp1 = new Razorpay(options);
  rzp1.open();
});
</script>
</body>
</html>
